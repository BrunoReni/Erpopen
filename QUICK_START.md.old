# ğŸš€ Guia de InÃ­cio RÃ¡pido - ERP Open

## Passo 1: Iniciar o Backend

```bash
cd backend

# Ativar ambiente virtual
source .venv/bin/activate  # Linux/Mac
# ou
.venv\Scripts\activate  # Windows

# Instalar dependÃªncias (se necessÃ¡rio)
pip install -r requirements.txt

# Iniciar servidor
uvicorn main:app --reload
```

âœ… Backend rodando em: http://localhost:8000
âœ… DocumentaÃ§Ã£o API: http://localhost:8000/docs

## Passo 2: Iniciar o Frontend

Abra um novo terminal:

```bash
cd frontend

# Instalar dependÃªncias (primeira vez)
npm install

# Iniciar servidor de desenvolvimento
npm run dev
```

âœ… Frontend rodando em: http://localhost:5173

## Passo 3: Acessar o Sistema

1. Abra o navegador em: http://localhost:5173
2. VocÃª serÃ¡ redirecionado para a tela de login
3. Como ainda nÃ£o tem conta, clique em "Registre-se"
4. Preencha seus dados e crie uma conta
5. ApÃ³s registro, vocÃª serÃ¡ automaticamente logado
6. Explore o Dashboard! ğŸ‰

## ğŸ” PermissÃµes do Primeiro UsuÃ¡rio

O primeiro usuÃ¡rio criado terÃ¡ o perfil **"user"** por padrÃ£o, com permissÃµes bÃ¡sicas:
- âœ… dashboard:read
- âœ… products:read
- âœ… customers:read

### Para ter acesso Admin:

**OpÃ§Ã£o 1 - Via Python (Recomendado):**

```bash
# No terminal onde o backend estÃ¡ rodando, pressione Ctrl+C
# Depois execute:
python

# Cole este cÃ³digo:
from app.db import SessionLocal
from app import crud, models

db = SessionLocal()

# Buscar seu usuÃ¡rio (substitua o email)
user = crud.get_user_by_email(db, "seu@email.com")

# Buscar role admin
admin_role = db.query(models.Role).filter(models.Role.name == "admin").first()

# Adicionar role
user.roles.append(admin_role)
db.commit()

print(f"âœ… {user.email} agora Ã© ADMIN!")

# Sair do Python
exit()

# Reiniciar o servidor
uvicorn main:app --reload
```

**OpÃ§Ã£o 2 - Via API:**

Use o Swagger em http://localhost:8000/docs

## ğŸ§ª Testar o Sistema

Execute o script de testes:

```bash
./test_system.sh
```

## ğŸ“¦ Estrutura de PermissÃµes

### MÃ³dulos DisponÃ­veis:
- **Dashboard** (dashboard:read)
- **UsuÃ¡rios** (users:*)
- **Produtos** (products:*)
- **Clientes** (customers:*)
- **Vendas** (sales:*)
- **InventÃ¡rio** (inventory:*)
- **RelatÃ³rios** (reports:read, reports:export)

### Perfis PadrÃ£o:
- **admin**: Todas as permissÃµes
- **manager**: Operacional (sem users/roles)
- **user**: Leitura bÃ¡sica

## ğŸ› ï¸ Desenvolvimento

### Adicionar Novo MÃ³dulo:

#### 1. Backend - Criar Router

`backend/app/routes/produtos.py`:
```python
from fastapi import APIRouter, Depends
from app.dependencies import require_permission

router = APIRouter()

@router.get("/", dependencies=[Depends(require_permission("products:read"))])
def list_products():
    return {"products": []}

@router.post("/", dependencies=[Depends(require_permission("products:create"))])
def create_product(data: dict):
    return {"message": "Product created"}
```

#### 2. Backend - Registrar Router

`backend/main.py`:
```python
from app.routes import produtos

app.include_router(produtos.router, prefix="/produtos", tags=["produtos"])
```

#### 3. Frontend - Criar Componente

`frontend/src/modules/produtos/ProductsList.tsx`

#### 4. Frontend - Adicionar Rota

`frontend/src/App.tsx`:
```tsx
<Route
  path="/products"
  element={
    <ProtectedRoute requiredPermissions={['products:read']}>
      <MainLayout>
        <ProductsList />
      </MainLayout>
    </ProtectedRoute>
  }
/>
```

#### 5. Frontend - Adicionar ao Menu

O menu jÃ¡ estÃ¡ configurado! Apenas certifique-se de que a permissÃ£o estÃ¡ correta.

## ğŸ“ Comandos Ãšteis

### Backend:
```bash
# Rodar testes
pytest

# Criar migraÃ§Ã£o (quando implementar Alembic)
alembic revision --autogenerate -m "mensagem"

# Aplicar migrations
alembic upgrade head
```

### Frontend:
```bash
# Build para produÃ§Ã£o
npm run build

# Preview do build
npm run preview

# Lint
npm run lint
```

## ğŸ› Troubleshooting

### Backend nÃ£o inicia:
```bash
# Verificar se porta 8000 estÃ¡ livre
lsof -i :8000

# Reinstalar dependÃªncias
pip install -r requirements.txt --force-reinstall
```

### Frontend nÃ£o inicia:
```bash
# Limpar cache e reinstalar
rm -rf node_modules package-lock.json
npm install
```

### Erro de CORS:
Verifique se o backend estÃ¡ rodando em `localhost:8000` e o frontend em `localhost:5173`.

### PermissÃµes nÃ£o aparecem:
1. FaÃ§a logout
2. FaÃ§a login novamente
3. O token serÃ¡ regenerado com as novas permissÃµes

## ğŸ“š DocumentaÃ§Ã£o Completa

- **Backend API**: http://localhost:8000/docs
- **Guia Completo**: `REVIEW_AND_SETUP.md`
- **README Principal**: `README.md`

## ğŸ¯ PrÃ³ximos Passos

1. [ ] Explorar a API Documentation
2. [ ] Criar seu primeiro CRUD completo
3. [ ] Implementar validaÃ§Ãµes
4. [ ] Adicionar testes
5. [ ] Configurar para produÃ§Ã£o

---

**DÃºvidas?** Consulte os READMEs ou a documentaÃ§Ã£o da API!

**Bom desenvolvimento! ğŸš€**
